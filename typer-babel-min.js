(function(b,c){return'object'==typeof exports?module.exports=c():'function'==typeof define&&define.amd?define(function(){return c()}):b.typer=c()})(this,function(){const c=d=>d?(d^16*Math.random()>>d/4).toString(16):'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,c);return function(d,f){function g(I){return{}.toString.call(I).slice(8,-1)}function h(I){const J=g(I);if('html'!==J.slice(0,4).toLowerCase()&&'String'!==J)throw'You need to provide a string selector, such as \'.some-class\', or an html element.';return J}function j(I){const J=g(I);if(void 0===I)return E.speedSet?f:70;if('Number'===J&&!isNaN(I))return I;if('Object'===J){const K=I.hasOwnProperty('min'),L=I.hasOwnProperty('max'),M=I.hasOwnProperty('speed');if(M&&!isNaN(I.speed))return I.speed;if(K&&L&&I.min<I.max)return I;if(!Object.keys(I).length&&E.speedSet)return f;if(!K&&!L&&!M)return f}throw Error('You have provided an invalid value for speed.')}function k(I,J){E.style&&E.style.remove(),E.newDiv&&l(),d.removeAttribute('data-typer'),F.removeEventListener('killTyper',C),E.newDiv&&E.newDiv.classList.add('white-space'),E.newDiv='','function'==typeof I?I(d):'function'==typeof J&&J(d),(!0===I||!0===J)&&F.dispatchEvent(new Event('typerFinished'))}function l(){['typer','cursor-block','cursor-soft','cursor-hard','no-cursor'].forEach(I=>{E.newDiv.classList.remove(I)})}function m(I,J){return Math.floor(Math.random()*(J-I+1)+I)}function n(I,J){E.style=document.createElement('style'),E.style.appendChild(document.createTextNode('')),document.head.appendChild(E.style);const K=document.styleSheets[document.styleSheets.length-1];'insertRule'in K?K.insertRule(`${I}{${J}}`,0):K.addRule(I,J)}function o(I,J,K){function L(O={},P){const Q=O.container,R=!P&&('String'===g(Q)?document.querySelector(Q).textContent:Q.textContent);return{[I]:P||R,speed:j(O),html:!1!==O.html,element:M?O.element:null}}const M='line'===I;J||K?'Object'===g(J)?(M||'continue'===I&&J.container)&&E.push(L(J)):isNaN(K)?E.push(L(K,J)):E.push({[I]:J,speed:j(K),html:!0}):M&&E.push({line:1})}function p(){return 0<=E.item||(E.item=0),E.item===E.length?F.removeEventListener('killTyper',C):void(!E.ks&&(E.ks=!0,F.addEventListener('killTyper',C)),!E.cursor&&(E.cursor='cursor-soft'),E.type=setInterval(()=>{if(!E.length)return clearInterval(E.type);const I=E[E.item];I.line?r(I):I.continue?s(I):I.pause?v(I):I.emit?w(I):I.listen?x(I):I.back?y(I):I.empty?z():I.run?A(I):I.end&&B(I)},0))}function r(I){clearInterval(E.type),E.newDiv&&(l(),E.newDiv.classList.add('white-space'),!E.newDiv.innerHTML&&(E.newDiv.innerHTML=' '));const J=document.createElement(I.element||'div');return J.setAttribute('data-typer-child',E.uuid),J.className=E.cursor,J.classList.add('typer'),J.classList.add('white-space'),d.appendChild(J),E.newDiv=J,1===I.line?(E.item++,p()):void u(I)}function s(I){clearInterval(E.type),u(I)}function t(I,J,K){const L='Object'===g(I),M=L?m(I.min,I.max):I;E.iterator=setTimeout(()=>J(K),M)}function u(I){function L(Q,R){let S=[];Q=Array.from(Q);for(let T=0;T<Q.length;T++){const U=Q[T],V=U.nodeName;if('#text'===V)S.push({parent:R,content:U.textContent});else if(U.childNodes.length){let W=document.createElement(V);Array.from(U.attributes).forEach(X=>{W.setAttribute(X.name,X.value)}),S.push({parent:R,newNode:W}),S=S.concat(L(U.childNodes,W))}else E.voids.includes(V)&&S.push({parent:R,voidNode:U})}return S}function N(){return clearInterval(E.iterator),E.item++,p()}const O=I.line||I.continue,P=document.createElement('div');return Array.isArray(O)?function(Q){function R(){const T=O[S++];P.textContent=T,E.newDiv.innerHTML+=Q?T:P.innerHTML,S===O.length?N():t(I.speed,R)}let S=0;t(I.speed,R)}(I.html):void(P.innerHTML=O,I.html?function(){function Q(){return U?void(U.content?(U.parent.innerHTML+=U.content[T++],T===U.content.length&&(T=0,U=R[S++])):(U.parent.appendChild(U.voidNode||U.newNode),U=R[S++]),t(I.speed,Q)):N()}let R=L(P.childNodes,E.newDiv),S=0,T=0,U=R[S++];t(I.speed,Q)}():function(){function Q(){if(R===O.length)return N();let S=O[R];'String'!==g(O)&&(P.textContent=S,S=P.innerHTML),E.newDiv.innerHTML+=S,R++,t(I.speed,Q)}let R=0;t(I.speed,Q)}())}function v(I){clearInterval(E.type),E.pause=setTimeout(()=>{E.item++,p()},I.pause)}function w(I){clearInterval(E.type),I.el.dispatchEvent(new Event(I.emit)),E.item++,p()}function x(I){function J(K){I.el.removeEventListener(K.type,J),E.killed||(E.item++,p())}clearInterval(E.type),I.el.addEventListener(I.listen,J),G={el:I.el,type:I.listen,fxn:J}}function y({back:I,speed:J}){function K(Q){let R=0,S=L(Q||E.newDiv).reverse();return function(){const T=S[0],U=E.voids.includes(T.nodeName);U?(T.remove(),S.shift()):(T.textContent=T.textContent.slice(0,-1),!T.length&&S.shift()),Q||(R++,R===I&&(clearInterval(E.goBack),M(E.newDiv),E.item++,p()))}}function L(Q){let R=[],S=Array.from(Q.childNodes);return S.length?(S.forEach(T=>{T.childNodes.length?R=R.concat(L(T)):R.push(T)}),R):R}function M(Q){Array.from(Q.childNodes).forEach(R=>{E.voids.includes(R.nodeName)||(R.childNodes.length&&M(R),'#text'!==R.nodeName&&!R.innerHTML.length&&R.remove(),'#text'===R.nodeName&&!R.length&&R.remove())})}function N(Q){let R=0;return Array.from(Q.childNodes).forEach(S=>{E.voids.includes(S.nodeName)&&R++,S.childNodes.length&&(R+=N(S))}),R}if(clearInterval(E.type),!E.newDiv||!E.newDiv.textContent)return E.item++,p();const O=N(E.newDiv),P=E.newDiv.textContent.length;if('empty'===I){if(!J||J>=P)E.newDiv.innerHTML='';else{const Q=E.newDiv.cloneNode(!0),R=K(Q);0>J&&(J+=P);for(let S=0;S<J;S++)R();M(Q),E.newDiv.innerHTML=Q.innerHTML}return E.item++,p()}I>P+O&&(I='all'),'all'===I&&(I=P+O),0>I&&(I=P+O- -1*I),E.goBack=setInterval(K(),J||f)}function z(){d.innerHTML='',r({line:1})}function A({run:I}){clearInterval(E.type),I(d),E.item++,p()}function B(){clearInterval(E.type),E.cb()}function C(){return G.el&&G.el.removeEventListener(G.type,G.fxn),clearInterval(E.iterator),clearInterval(E.goBack),clearTimeout(E.pause),E.length=0,k(),D('kill')}function D(I){function J(L){return console.warn(K,L),H}const K=`WARNING: you tried to call ".%s" after ".${I}" has already been called.\nThe public API has been nullified.`;return Object.keys(H).forEach(L=>{'kill'===L&&'end'===I||(H[L]=J.bind(null,L))}),'kill'===I&&(E.killed&&J(),E.killed=!0),H}const E=[],F=document.body;let G={};if('String'===h(d)&&(d=document.querySelector(d)),d.getAttribute('data-typer'))throw`You've already called Typer on this element.`;f=j(f),E.speedSet=!0,E.voids=['AREA','BASE','BR','COL','COMMAND','EMBED','HR','IMG','INPUT','KEYGEN','LINK','META','PARAM','SOURCE','TRACK','WBR'],E.classNames=['typer','cursor-block','cursor-soft','cursor-hard','no-cursor'],E.uuid=c(),d.setAttribute('data-typer',E.uuid);const H={cursor:function(I){if(E.cursorRan)return console.warn('You can only call ".cursor" once.'),this;if(E.cursorRan=!0,void 0===I&&(I=!0),!1===I)return E.cursor='no-cursor',this;const{color:J,blink:K,block:L}=I,M=[],N=`[data-typer="${E.uuid}"]`;return J&&n(`${N} .typer::after`,`background-color:${J}`),M.push(`cursor-${'hard'===K?'hard':'soft'}`),!0===L&&M.push('cursor-block'),E.cursor=M.join(' '),this},line:function(I,J){return o('line',I,J),E.typing||(E.typing=!0,p()),this},continue:function(I,J){return o('continue',I,J),this},pause:function(I){return E.push({pause:+I||500}),this},emit:function(I,J){return J?'String'===h(J)&&(J=document.querySelector(J)):J=F,E.push({emit:I,el:J}),this},listen:function(I,J){return J?'String'===h(J)&&(J=document.querySelector(J)):J=F,E.push({listen:I,el:J}),this},back:function(I,J){return E.push({back:I,speed:J}),this},empty:function(){return E.push({empty:!0}),this},run:function(I){return E.push({run:I}),this},end:function(I,J){return E.push({end:!0}),E.cb=()=>k(I,J),D('end')},kill:C};return H}});